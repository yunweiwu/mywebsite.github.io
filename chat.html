<html>
<head>
    <title>留言板</title>
</head>
<body>
    <h1>留言板</h1>
    
    <form>
        <textarea id="message" rows="4" cols="50"></textarea><br>
        <button type="button" onclick="addMessage()">提交</button>
    </form>
    
    <div id="messageList"></div>

    <script>
        // 添加留言
        function addMessage() {
            var message = document.getElementById("message").value;
            
            // 检查是否存在已保存的留言
            var storedMessages = localStorage.getItem("messageList");
            var storedMessagesArray = JSON.parse(storedMessages);
            
            // 如果没有已保存的留言，则创建新的数组存储留言
            if (!storedMessagesArray) {
                storedMessagesArray = [];
            }
            
            // 添加新的留言到数组
            storedMessagesArray.push(message);
            
            // 保存数组到本地存储
            localStorage.setItem("messageList", JSON.stringify(storedMessagesArray));
            
            // 清空留言框
            document.getElementById("message").value = "";
            
            // 更新留言列表
            updateMessageList();
        }
        
        // 更新留言列表
        function updateMessageList() {
            // 获取本地存储的留言数组
            var storedMessages = localStorage.getItem("messageList");
            var storedMessagesArray = JSON.parse(storedMessages);
            
            // 清空留言列表
            document.getElementById("messageList").innerHTML = "";
            
            // 遍历留言数组并显示在页面上
            if (storedMessagesArray) {
                for (var i = 0; i < storedMessagesArray.length; i++) {
                    var message = storedMessagesArray[i];
                    
                    // 创建留言元素
                    var messageElement = document.createElement("p");
                    messageElement.innerHTML = message;
                    
                    // 添加留言元素到留言列表
                    document.getElementById("messageList").appendChild(messageElement);
                }
            }
        }
        
        // 页面加载时更新留言列表
        updateMessageList();
    </script>
</body>
</html>
