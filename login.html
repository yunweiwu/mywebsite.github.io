<!DOCTYPE html>
<html>
<head>
    <title>留言板</title>
</head>
<body>
    <h1>注册</h1>
    <form id="register-form">
        <label for="username">用户名:</label>
        <input type="text" id="username" name="username" required><br><br>
        <label for="password">密码:</label>
        <input type="password" id="password" name="password" required><br><br>
        <input type="submit" value="注册">
    </form>

    <h1>登录</h1>
    <form id="login-form">
        <label for="login-username">用户名:</label>
        <input type="text" id="login-username" name="username" required><br><br>
        <label for="login-password">密码:</label>
        <input type="password" id="login-password" name="password" required><br><br>
        <input type="submit" value="登录">
    </form>

    <h1>留言</h1>
    <form id="message-form">
        <textarea id="message" name="message" required></textarea><br><br>
        <input type="submit" value="发表留言">
    </form>

    <h1>留言列表</h1>
    <div id="message-list"></div>

    <script>
        // 注册功能
        document.getElementById('register-form').addEventListener('submit', function (event) {
            event.preventDefault();
            var username = document.getElementById('username').value;
            var password = document.getElementById('password').value;

            // 保存用户名和密码到本地存储
            localStorage.setItem(username, password);

            alert('注册成功！');

            // 清空表单
            document.getElementById('register-form').reset();
        });

        // 登录功能
        document.getElementById('login-form').addEventListener('submit', function (event) {
            event.preventDefault();
            var username = document.getElementById('login-username').value;
            var password = document.getElementById('login-password').value;

            // 检查用户名和密码是否匹配
            if (localStorage.getItem(username) === password) {
                alert('登录成功！');

                // 清空表单
                document.getElementById('login-form').reset();
            } else {
                alert('用户名或密码错误！');
            }
        });

        // 发表留言功能
        document.getElementById('message-form').addEventListener('submit', function (event) {
            event.preventDefault();
            var message = document.getElementById('message').value;

            // 获取当前用户的用户名
            var currentUser = getCurrentUser();

            // 添加留言到列表
            var messageElement = document.createElement('p');
            messageElement.innerHTML = '[' + currentUser + '] ' + message;
            document.getElementById('message-list').appendChild(messageElement);

            // 清空表单
            document.getElementById('message-form').reset();
        });

        // 删除留言功能
        document.getElementById('message-list').addEventListener('click', function (event) {
            if (event.target.tagName === 'P') {
                event.target.parentNode.removeChild(event.target);
            }
        });

        // 获取当前用户的用户名
        function getCurrentUser() {
            var username = document.getElementById('login-username').value;
            return username;
        }
    </script>
</body>
</html>
